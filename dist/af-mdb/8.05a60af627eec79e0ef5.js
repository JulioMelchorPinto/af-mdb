(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{CedQ:function(t,e,n){"use strict";n.r(e);var o=n("CcnG"),r=n("0bV8"),l=function(){return function(){}}();function c(t){return new r.a(t)}var i=n("cyBs"),u=n("y5Pl"),a=n("M+1Z"),s=n("JEFa"),b=n("pMnS"),p=n("A7o+"),d=n("OMr1"),j=n("DCf/"),f=n("MZFh"),h=n("Ip0R"),O=n("mrSG"),y=n("yGQT"),A=function(t){return t.PROJECTS_QUERY="[Projects] Projects query",t.PROJECTS_LOADED="[Projects] Projects loaded",t.PROJECT_ADDED="[Projects] Project added",t.PROJECT_EDITED="[Projects] Project edited",t.PROJECT_DELETED="[Projects] Project deleted",t.PROJECTS_ERROR="[Projects] Projects error",t}({}),E=function(){return function(){this.type=A.PROJECTS_QUERY}}(),m=function(){return function(t){this.payload=t,this.type=A.PROJECTS_LOADED}}(),P=function(){return function(t){this.payload=t,this.type=A.PROJECT_ADDED}}(),g=function(){return function(t){this.payload=t,this.type=A.PROJECT_EDITED}}(),R=function(){return function(t){this.payload=t,this.type=A.PROJECT_DELETED}}(),v=function(){return function(t){this.payload=t,this.type=A.PROJECTS_ERROR}}(),D=Object(y.v)("projects"),_=Object(y.x)(D,(function(t){return t.projects})),C=Object(y.x)(D,(function(t){return t.loading})),J=(Object(y.x)(D,(function(t){return t.error})),n("67Y/")),T=n("t9fZ"),k=n("d2bA"),S=n("qyy/"),w=function(){function t(t,e,n,o){this.store=t,this.modalService=e,this.afAuth=n,this.translate=o,this.modalConfig={class:"modal-dialog-centered"},o.addLangs(["en","es"]),o.setDefaultLang("es")}return t.prototype.switchLang=function(t){this.translate.use(t)},t.prototype.ngOnInit=function(){var t=this;this.isLoading$=this.store.select(C),this.projects$=this.store.pipe(Object(y.y)(_),Object(J.a)((function(e){return t.user&&!e&&t.store.dispatch(new E),e})))},Object.defineProperty(t.prototype,"user",{get:function(){return this.afAuth.auth.currentUser},enumerable:!0,configurable:!0}),t.prototype.openAddProjectModal=function(){var t=this;this.modalRef=this.modalService.show(S.a,this.modalConfig),this.modalRef.content.heading="Add new project",this.modalRef.content.projectData.pipe(Object(T.a)(1)).subscribe((function(e){t.store.dispatch(new P({project:e}))}))},t.prototype.openEditProjectModal=function(t){var e=this;this.modalRef=this.modalService.show(S.a,this.modalConfig),this.modalRef.content.heading="Edit project";var n=Object(O.__assign)({},t);this.modalRef.content.project=n,this.modalRef.content.projectData.pipe(Object(T.a)(1)).subscribe((function(t){e.store.dispatch(new g({project:t}))}))},t.prototype.openConfirmModal=function(t){var e=this;this.modalRef=this.modalService.show(k.a,this.modalConfig),this.modalRef.content.confirmation.pipe(Object(T.a)(1)).subscribe((function(n){n&&e.store.dispatch(new R({project:t}))}))},t.prototype.onProjectDelete=function(t){this.openConfirmModal(t)},t.prototype.onProjectEdit=function(t){this.openEditProjectModal(t)},t}(),$=n("ZBkt"),q=o.ob({encapsulation:0,styles:[[""]],data:{}});function I(t){return o.Kb(0,[(t()(),o.qb(0,0,null,null,4,"div",[["class","d-flex justify-content-center align-items-center"],["style","margin-top: 200px"]],null,null,null,null,null)),(t()(),o.qb(1,0,null,null,3,"div",[["class","spinner-grow text-primary"],["role","status"],["style","width: 4rem; height: 4rem;"]],null,null,null,null,null)),(t()(),o.qb(2,0,null,null,2,"span",[["class","sr-only"]],null,null,null,null,null)),(t()(),o.Ib(3,null,["","..."])),o.Db(131072,p.j,[p.k,o.h])],null,(function(t,e){t(e,3,0,o.Jb(e,3,0,o.Cb(e,4).transform("Loading")))}))}function L(t){return o.Kb(0,[(t()(),o.qb(0,0,null,null,6,"div",[["class","white px-4 section-header"]],null,null,null,null,null)),(t()(),o.qb(1,0,null,null,2,"h3",[],null,null,null,null,null)),(t()(),o.Ib(2,null,["",""])),o.Db(131072,p.j,[p.k,o.h]),(t()(),o.qb(4,0,null,null,2,"p",[["class","grey-text pt-3"]],null,null,null,null,null)),(t()(),o.Ib(5,null,["",""])),o.Db(131072,p.j,[p.k,o.h]),(t()(),o.qb(7,0,null,null,11,"div",[["class","container-fluid pb-5"]],null,null,null,null,null)),(t()(),o.qb(8,0,null,null,10,"div",[["class","py-5"]],null,null,null,null,null)),(t()(),o.qb(9,0,null,null,3,"button",[["class","ml-3"],["color","primary"],["mdbBtn",""]],null,[[null,"click"]],(function(t,e,n){var o=!0;return"click"===e&&(o=!1!==t.component.openAddProjectModal()&&o),o}),i.x,i.i)),o.pb(10,638976,null,0,d.I,[o.k,o.B],{color:[0,"color"]},null),(t()(),o.Ib(11,0,["",""])),o.Db(131072,p.j,[p.k,o.h]),(t()(),o.qb(13,0,null,null,2,"app-projects-list",[],null,[[null,"projectDeleted"],[null,"projectEdited"]],(function(t,e,n){var o=!0,r=t.component;return"projectDeleted"===e&&(o=!1!==r.onProjectDelete(n)&&o),"projectEdited"===e&&(o=!1!==r.onProjectEdit(n)&&o),o}),j.b,j.a)),o.pb(14,114688,null,0,f.a,[p.k],{projects:[0,"projects"]},{projectDeleted:"projectDeleted",projectEdited:"projectEdited"}),o.Db(131072,h.b,[o.h]),(t()(),o.fb(16777216,null,null,2,null,I)),o.pb(17,16384,null,0,h.k,[o.N,o.J],{ngIf:[0,"ngIf"]},null),o.Db(131072,h.b,[o.h])],(function(t,e){var n=e.component;t(e,10,0,"primary"),t(e,14,0,o.Jb(e,14,0,o.Cb(e,15).transform(n.projects$))),t(e,17,0,o.Jb(e,17,0,o.Cb(e,18).transform(n.isLoading$)))}),(function(t,e){t(e,2,0,o.Jb(e,2,0,o.Cb(e,3).transform("ProjectPanel"))),t(e,5,0,o.Jb(e,5,0,o.Cb(e,6).transform("ProjectSubtitle"))),t(e,11,0,o.Jb(e,11,0,o.Cb(e,12).transform("AddProject")))}))}function x(t){return o.Kb(0,[(t()(),o.qb(0,0,null,null,1,"app-projects",[],null,null,null,L,q)),o.pb(1,114688,null,0,w,[y.n,d.E,$.a,p.k],null,null)],(function(t,e){t(e,1,0)}),null)}var M=o.mb("app-projects",w,x,{},{},[]),Y=n("gIcY"),F=n("t/Na"),K=n("PCNd"),N=n("ZYCi"),Q=function(){return function(){}}(),U={projects:null,loading:!1,error:null};function Z(t,e){switch(void 0===t&&(t=U),e.type){case A.PROJECTS_QUERY:return Object.assign({},t,{loading:!0});case A.PROJECTS_LOADED:return Object.assign({},t,{projects:e.payload.projects,loading:!1});case A.PROJECTS_ERROR:return Object.assign({},t,{loading:!1,error:e.payload.error});default:return t}}var B=n("jYNz"),X=n("/PH2"),H=n("15JJ"),z=n("9Z1F"),G=n("F/XL"),V=n("Xd88"),W=function(){function t(t,e,n){var o=this;this.actions$=t,this.projectsService=e,this.store=n,this.query$=this.actions$.pipe(Object(B.f)(A.PROJECTS_QUERY),Object(X.a)(this.store.pipe(Object(y.y)(V.e))),Object(H.a)((function(t){return o.projectsService.get(t[1].uid).pipe(Object(J.a)((function(t){var e=t.map((function(t){var e=t.payload.key,n=t.payload.val();return{key:e||null,title:n.title||null,description:n.description||null,photoUrl:n.photoUrl||null}}));return new m({projects:e})})),Object(z.a)((function(t){return Object(G.a)(new v({error:t}))})))}))),this.added$=this.actions$.pipe(Object(B.f)(A.PROJECT_ADDED),Object(J.a)((function(t){return t.payload})),Object(X.a)(this.store.pipe(Object(y.y)(V.e))),Object(H.a)((function(t){return o.projectsService.add(t[0].project,t[1].uid)}))),this.delete$=this.actions$.pipe(Object(B.f)(A.PROJECT_DELETED),Object(J.a)((function(t){return t.payload})),Object(X.a)(this.store.pipe(Object(y.y)(V.e))),Object(H.a)((function(t){return o.projectsService.delete(t[0].project,t[1].uid)}))),this.edit$=this.actions$.pipe(Object(B.f)(A.PROJECT_EDITED),Object(J.a)((function(t){return t.payload})),Object(X.a)(this.store.pipe(Object(y.y)(V.e))),Object(H.a)((function(t){return o.projectsService.update(t[0].project,t[1].uid)})))}return Object(O.__decorate)([Object(B.b)(),Object(O.__metadata)("design:type",Object)],t.prototype,"query$",void 0),Object(O.__decorate)([Object(B.b)({dispatch:!1}),Object(O.__metadata)("design:type",Object)],t.prototype,"added$",void 0),Object(O.__decorate)([Object(B.b)({dispatch:!1}),Object(O.__metadata)("design:type",Object)],t.prototype,"delete$",void 0),Object(O.__decorate)([Object(B.b)({dispatch:!1}),Object(O.__metadata)("design:type",Object)],t.prototype,"edit$",void 0),t}(),tt=n("8cB+");n.d(e,"ProjectsModuleNgFactory",(function(){return et}));var et=o.nb(l,[],(function(t){return o.zb([o.Ab(512,o.j,o.Y,[[8,[i.c,i.d,u.a,a.a,s.a,b.a,M]],[3,o.j],o.v]),o.Ab(4608,h.m,h.l,[o.s,[2,h.y]]),o.Ab(4608,Y.u,Y.u,[]),o.Ab(4608,F.k,F.k,[]),o.Ab(6144,F.i,null,[F.k]),o.Ab(4608,F.g,F.g,[F.i]),o.Ab(6144,F.b,null,[F.g]),o.Ab(4608,F.f,F.j,[F.b,o.p]),o.Ab(4608,F.c,F.c,[F.f]),o.Ab(5120,p.g,c,[F.c]),o.Ab(4608,p.d,p.f,[]),o.Ab(4608,p.i,p.e,[]),o.Ab(4608,p.c,p.b,[]),o.Ab(4608,p.l,p.l,[]),o.Ab(4608,p.k,p.k,[p.l,p.g,p.d,p.i,p.c,p.m,p.o,p.n,p.a]),o.Ab(4608,F.h,F.n,[h.d,o.z,F.l]),o.Ab(4608,F.o,F.o,[F.h,F.m]),o.Ab(5120,F.a,(function(t){return[t]}),[F.o]),o.Ab(1073742336,h.c,h.c,[]),o.Ab(1073742336,d.bb,d.bb,[]),o.Ab(1073742336,d.y,d.y,[]),o.Ab(1073742336,d.x,d.x,[]),o.Ab(1073742336,d.w,d.w,[]),o.Ab(1073742336,Y.t,Y.t,[]),o.Ab(1073742336,Y.i,Y.i,[]),o.Ab(1073742336,d.j,d.j,[]),o.Ab(1073742336,d.k,d.k,[]),o.Ab(1073742336,p.h,p.h,[]),o.Ab(1073742336,K.a,K.a,[]),o.Ab(1073742336,N.o,N.o,[[2,N.t],[2,N.k]]),o.Ab(1073742336,Q,Q,[]),o.Ab(1073742336,F.e,F.e,[]),o.Ab(1073742336,F.d,F.d,[]),o.Ab(1073742336,d.rb,d.rb,[]),o.Ab(1024,y.I,(function(){return[{}]}),[]),o.Ab(1024,y.j,(function(){return[{key:"projects",reducerFactory:y.s,metaReducers:[],initialState:void 0}]}),[]),o.Ab(1024,y.J,y.P,[o.p,y.I,y.j]),o.Ab(1024,y.H,(function(){return[Z]}),[]),o.Ab(1024,y.K,(function(t){return[t]}),[y.H]),o.Ab(1024,y.b,(function(t,e,n){return[y.Q(t,e,n)]}),[o.p,y.H,y.K]),o.Ab(1073873408,y.o,y.o,[y.J,y.b,y.g,y.p]),o.Ab(512,W,W,[B.a,tt.a,y.n]),o.Ab(1024,B.k,(function(t){return[B.g(t)]}),[W]),o.Ab(1073742336,B.d,B.d,[B.e,B.k,[2,y.p],[2,y.o]]),o.Ab(1073742336,l,l,[]),o.Ab(256,p.o,void 0,[]),o.Ab(256,p.m,void 0,[]),o.Ab(256,p.n,void 0,[]),o.Ab(256,p.a,void 0,[]),o.Ab(1024,N.i,(function(){return[[{path:"",component:w}]]}),[]),o.Ab(256,F.l,"XSRF-TOKEN",[]),o.Ab(256,F.m,"X-XSRF-TOKEN",[])])}))}}]);